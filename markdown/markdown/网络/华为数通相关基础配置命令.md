# 设置系统参数
1. 查看系统信息：`display version`
2. 修改系统时间：
	1. 修改时区：`clock timezone local add 08:00:00`
	2. 修改日期时间：`clock datetime 12:00:00 2022.10.02`
	3. 查看新的系统时间：`display clock`
3. 进入系统视图：`system-view`
4. 修改设备名称：`sysname R1`
5. 配置登录信息：`header shell information “Welcome”`
6. 查看当前设备上存储的文件：`dir`
7.  管理设备配置文件
	1. 查看保存的配置文件：`display saved-configuration`
	2. 保存当前配置文件：在用户视图输入`save`
	3. 查看当前配置信息：`display current-configuration`
	4. 查看下次启动时使用的配置文件：`display starup`
	5. 删除内存中的配置文件：`reset saved-configuration`
8.  重启设备：`reboot`
# 设备认证模式及账户配置

```
//进入系统视图并改名
system-view
sysname R2

//为指定接口配置ip地址
interface g0/0/0
ip address 192.168.12.2 24

//配置接口：用户虚拟界面(vty)，用于远程登录
user-interface vty 0 4

//配置接口：console口，用于console线直连
user-interface console 0

//设置认证模式为password或aaa，此处为password
authentication-mode password

//首次设置认证模式后会弹出设置密码界面，以下命令是重设密码
set authentication password cipher spoto

//设置用户权限等级
user privilege level 15

//设置超时时间为20分钟0秒
idle-timeout 20 0

//另一台终端登录
telnet  ip
```
# 路由器
1. 查看ip路由表的命令：`display ip routing-table`
2. 静态路由配置方式：

```
//关联下一跳ip的方式
ip route-static ip-address mask nexthop-address

//关联出接口的方式
ip route-static ip-address mask interface-type interface-number

//关联出接口和下一跳的方式
ip route-static ip-address mask interface-type interface-number [nexthop-address]

在创建静态路由时，可以同时指定出接口和下一跳。对于不同的出接口类型，也可以只指定出接口或只指定下一跳。
对于点到点接口（如串口），必须指定出接口。
对于广播接口（如以太网接口）和 VT（Virtual-template）接口，必须指定下一跳
```
3. ospf配置方式

```
//创建进程并设置routeid
ospf 1 router-id 1.1.1.1

//表名要配置的区域
area 0

//宣告此区域的网络
network 192.168.1.0 24

//修改优先级
ospf dr-priority 0

//查看ospf配置
display ospf brief

//查看ospf邻居
display ospf peer brief

//查看ospf路由表
display ospf routing-table
```
# 交换机
1. 创建vlan10：`vlan 10`
2. 将接口加入到vlan10中

```
//配置接口类型为hybrid，并通过打标的方式允许vlan100，,01，,02通过
interface GigabitEthernet0/0/1
port link-type  hybrid
port hybrid tagged vlan 100 to 102


//配置接口类型为trunk并允许vlan10,11通过
interface GigabitEthernet0/0/1
port link-type trunk
port trunk allow-pass vlan 10 to 11

//配置接口类型为access并设置默认pvid为vlan10
interface GigabitEthernet0/0/2
port link-type access
port default vlan 10

```
3. STP相关配置命令

```
//设置STP模式，此处为STP
stp mode stp

//显示STP摘要
display stp brief

//修改桥优先级
stp priority 0
```
# VLAN间通信
## 配置单臂路由

```
sys
sysname ar1

//启用子接口
int g0/0/0.1

//配置终结子接口
dot1q termination vid 10

//配置子接口ip，通常是对应终结子接口中vlan的网关
ip address 192.168.1.254 24

//开启arp广播，注意，子接口的arp广播功能默认是关闭的，必须手动开启
arp broadcast enable

//另一个子接口的配置
int g0/0/0.2
dot1q termination vid 20
ip address 192.168.2.254 24
arp broadcast enable
```
## 三层交换机

```
//创建vlanif接口，接口后的数字为对应的VLAN ID
int vlanif 10

//为vlanif接口配置地址，通通常为对应VLAN的网关
ip add 192.168.100.1 24

//另一个vlanif接口的配置
int vlanif 20
ip add 192.168.200.1 24
```
# ACL
```
//创建ACL
acl 3000

//创建规则
rule 5 deny ip source 192.168.1.1 0destination 192.168.2.1 0

//将规则应用到接口，此处是应用到g0/0/1接口的入方向
int g0/0/1
traffic-filter inbound acl 3000
```
# 配置DHCP服务器

```
//在三层交换机或路由器上启动DHCP
dhcp enable

//创建地址池
ip pool 10

//配置地址空间，一般是网络地址
network 192.168.10.0 mask 255.255.255.0

//配置网关，一般是接口地址
gateway-list 192.168.10.254

//配置dns服务器地址
dns-list 114.114.114.114 8.8.8.8

//进入到对应的子接口并应用DHCP
int vlanif10
dhcp select global
```
# NAT
## 静态NAT

```
//开启nat功能，并设置nat地址映射
nat enable
nat static global {global-ip-address} inside {inside-local-ip-address} [mapping-id {mapping-id}]
//在这里，global-ip-address表示全局IP地址，inside-local-ip-address表示内部本地IP地址，mapping-id是映射ID（可选）。如果不指定映射ID，则会自动分配一个唯一的ID

//配置ACL以确保只有特定的流量被NAT转换。例如，以下命令将创建一个ACL来仅允许TCP流量传输
acl number 2001

//在Rule视图下添加ACL规则以允许源于内部网络的所有TCP流量出口进行路由到公网，其中{inside-network}是指内网地址所在的网段或者地址范围。
rule permit tcp source {inside-network} 0 destination any

//配置一个地址组（可选），并设其编号为1，指定全局IP地址为 {global-ip-address}
nat address-group 1 {global-ip-address} 

//将ACL编号为2001的ACL应用到地址组中，控制 NAT 导出流量选择的 IP 地址进行映射
address {inside-network} 0 acl-number 2001

//显示NAT会话
display nat session all
```
## 动态NAT

```
//创建地址池
ip pool pool_name gateway-list gateway_ip subnet-mask mask

//创建ACL规则，指定在哪些接口上使用动态NAT
acl number acl_name rule permit source source_ip source_wildcard

//将ACL与地址池绑定
nat pool pool_name acl acl_name

//在需要进行动态NAT的接口上启用地址转换服务
interface g0/0/1
nat outbound [nat-instance instance_id]

```
## NAPT

```
//创建地址池与端口池
ip pool pool_name gateway-list gateway_ip subnet-mask mask port port_num1 to port_num2

//创建ACL规则，指定在哪些接口上使用动态NAPT
acl number acl_name rule permit source source_ip source_wildcard

//将ACL与地址池绑定
nat napt pool pool_name acl acl_name

//在需要进行动态NAT的接口上启用地址转换服务
interface g0/0/1
nat napt outbound [nat-instance instance_id]
```
## NAT Server

```
//创建 ACL 规则，指定需要进行 NAT Server 的地址范围
acl number acl_name rule permit source source_ip source_wildcard

//创建 NAT Server，指定映射的外部 IP 地址与端口范围
nat server global global_ip [global_start_port - global_end_port] mapping-rule acl acl_name protocol { tcp | udp | tcp-udp }

//在需要进行 NAT Server 的接口上启用地址转换服务
int g0/0/1
nat server protocol { tcp | udp | tcp-udp } global global_ip [global_start_port - global_end_port]
```
## Easy ip

```
//原理和NAPT一样，公网+端口分配，但没有地址池，使用端口的公网地址。相比NAPT又去掉了地址池配置。

acl 2000
rule 15 permit source 192.168.1.0 0.0.0.255

interface gigabitethernet 0/0/1
nat outbound 2000
```